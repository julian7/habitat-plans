# Hostname goiardi should use. Used for sending links to resources back to the
# client
hostname = "localhost"

# Log level. Options are "debug", "info", "warning", "error", "critical", and
# "fatal". May be specified on the command line with one or more -V flags.
log_level = "error"

# How often to save the index and data files from the background. Not
# particularly useful without setting index-file and data-file
freeze_interval = 120

# Time slew: the time difference allowed between the server's clock and the time
# in the X-Ops-Timestamp header. Formatted like 5m, 150s, etc. Defaults to 15m.
time_slew = "15m"

# Use auth: Use authentication? If this is set to true, clients will have to
# be created on the server and have proper keys (which is the normal chef-server
# behavior). If it is not set, no authentication checks are performed. This is
# how chef-zero behaves, and goiardi's only mode previously. Defaults to false.
use_auth = true

# HTTPS urls: If true, URLs generated by the server will use 'https://'. Useful
# when goiardi is sitting behind a reverse proxy that uses SSL, but is
# communicating with the proxy over HTTP.
https_urls = false

# Disable webui: If true, connections and logins from the webui interface will
# not be allowed.
disable_webui = false

# Log events. Keep track of changes to chef objects by logging events that
# change them. They are accessible through the /events endpoint.
log_events = true

# How many log events to keep. If set, will periodically purge logged events to
# keep the number of events stored to this number.
log_event_keep = 1000

# Maximum object size in bytes for the file store. Default 10485760 bytes (10MB).
obj_max_size = 10485760

# Maximum size for a JSON request from the client. Default is 1000000.
json_req_max_size = 1000000

# Number of idle db connections to maintain. Default is 0 - no idle connections
# retained.
db_pool_size = 0

# Maximum number of connections allowed for the database. Default is 0 -
# unlimited.
max_connections = 0

# set to true to use . instead of _ to separate path items
# in the search key paths. Always true if pg-search is
# true.
dot_search = true
# Set to false to not convert searches with the old
# underscore separator to dots. Recommended to be set to
# true, at least for now. Only meaningful if dot-search
# is also true.
convert_search = true

# Proxy hostname and proxy port: If goiardi is sitting behind a reverse proxy
# that's listening on a different host or port than goiardi itself is using,
# set these to the values the proxy is using so URLs are properly crafted.
[proxy]
hostname = "host.name"
port = 80

# Have goiardi send and receive events and queries from a serf cluster. Required
# for shovey
[serf]
# Announce logged events over serf, as serf user events. If enabled, something
# needs to be reading the events from the queue, otherwise they'll pile up in
# the serf event queue and eventually make it so new events can't be added.
event_announce = false

# IP address and port for RPC connection with a serf agent. Defaults to
# 127.0.0.1:7373
address = "127.0.0.1:7373"

# Enable using shovey for sending jobs to nodes. Upload private key as 'shovey.key'
use_shovey = true

[statsd]
# With this, you can send some metrics about goiardi to statsd, which can in
# turn be sent on to graphite or similar and, when used with something like
# grafana, can be visualized or if used with something like bosun you could set
# alerts on it, like if the number of chef-client runs that fail suddenly jumps
# dramatically.
# address = "127.0.0.1:8125"

# type can also be "datadog", for their statsd format
# type = "standard"

# instance name is your hostname. "." will automatically converted to "_".
# instance = "my_goiardi_server"

[mysql]
# username = "foo"    # technically optional, although you probably want it
# password = "s3kr1t" # optional, if you have no password set for MySQL
# protocol = "tcp"    # optional, but set to "unix" for connecting to MySQL
#                     # through a Unix socket.
# address = "localhost"
# port = "3306"       # optional, defaults to 3306. Not used with sockets.
# dbname = "mydb"
# tls = "false"

[postgresql]
# Use the postgres search backend instead of the default
# in-memory search index.
# search = true
# username = "foo"
# password = "s3kr1t"
# host = "localhost"
# port = "5432"
# dbname = "mydb"
# sslmode = "disable"
